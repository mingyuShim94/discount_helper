# 할인도우미 PRD (Product Requirements Document)

## 1. 제품 개요

### 목적

할인도우미는 사용자들이 오프라인 매장에서 결제 시 활용할 수 있는 다양한 할인 수단(멤버십, 간편결제, 카드결제)을 쉽고 빠르게 확인하여 최적의 할인 방법을 제안하는 서비스입니다.

### 개발 배경

- 매장별로 상이한 할인 방법과 결제 수단으로 인한 사용자 혼란
- 실시간으로 변경되는 할인 정책을 한눈에 파악하기 어려움
- 현장에서 즉시 확인이 필요한 할인 정보에 대한 접근성 부족

### 가치 제안

- 매장별 최적의 할인 수단을 즉시 확인 가능
- 자주 방문하는 매장의 할인 정보를 즐겨찾기로 빠르게 접근
- 웹 기반으로 실시간 업데이트되는 할인 정보 제공
- 금액대별 최적의 할인 방법 제시
- 모바일 최적화된 UI로 현장에서 쉽고 빠르게 확인 가능

## 2. 대상 사용자

### 주요 사용자 그룹

1. 20-30대 직장인/대학생

- 일상적인 소비가 많으며 적극적으로 할인 혜택을 찾는 그룹
- 스마트폰을 통한 정보 검색에 익숙하며 즉각적인 정보 확인 니즈가 있음

2. 40-50대 실속형 소비자

- 계획적인 소비를 하며 할인 혜택을 중요시하는 그룹
- 복잡한 할인 정책을 쉽게 이해하고 싶어하는 니즈가 있음

## 3. 사용자 흐름

### 기본 사용자 시나리오

1. 첫 화면 진입

   - 카테고리별 매장 그리드뷰 확인
   - 즐겨찾기한 매장 상단 노출

2. 매장 선택

   - 원하는 매장 아이콘 클릭
   - 해당 매장의 할인 정보 페이지로 이동

3. 할인 수단 선택

   - 두 가지 주요 카테고리 제공:

     a. **멤버십**

     - 통신사 멤버십 (T멤버십, KT멤버십, U+멤버십)
     - 네이버 멤버십

     b. **결제 방법**

     - 페이 결제 (네이버페이, 카카오페이, 토스페이)
     - 카드 결제 (다양한 할인카드, 할인률 입력 가능)

4. 최적 할인 정보 확인
   - 선택한 멤버십/결제 방법 기반 최적의 할인 수단 표시
   - 금액 입력 및 POP 로고 유무 선택 가능
   - 할인 금액 및 비율 정보 제공

## 4. 기능 요구사항

### 핵심 기능

1. 카테고리별 매장 분류 표시

- 개발 난이도: 쉬움
- 우선순위: 상
- 세부내용: 편의점, 영화관, 오픈마켓 등 카테고리별 매장 그리드뷰 구현

2. 매장별 할인 정보 제공

- 개발 난이도: 보통
- 우선순위: 상
- 세부내용: 각 매장의 멤버십, 간편결제 및 카드결제 할인 정보 표시

3. 즐겨찾기 기능

- 개발 난이도: 쉬움
- 우선순위: 상
- 세부내용: 자주 방문하는 매장을 즐겨찾기하여 첫 화면에 노출

4. 최적 할인 수단 계산 및 추천

- 개발 난이도: 보통
- 우선순위: 상
- 세부내용: 사용자가 선택한 멤버십/결제 방법을 기반으로 금액대별 최적 할인 조합을 계산하여 표시

### 부가 기능

5. 할인카드 할인률 직접 입력 기능

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용: 사용자가 보유한 할인카드의 할인률을 직접 입력하여 맞춤형 계산 가능
- **상태: 구현 완료**

6. POP 로고 유무에 따른 할인 계산

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용: 특정 매장(예: GS25)에서 POP 로고 상품에 대한 특별 할인 적용 계산
- **상태: 구현 완료**

7. 멤버십 최소 결제 금액 고려

- 개발 난이도: 보통
- 우선순위: 중
- 세부내용: 통신사 멤버십(KT, U+)의 최소 결제 금액(1,000원) 조건 반영
- **상태: 구현 완료**

8. 네이버페이 금/토/일 캐시백 이벤트 알림

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용: 금/토/일에 네이버페이 선택 시 캐시백 이벤트 알림 표시 및 이벤트 신청 페이지 링크 제공
- **상태: 구현 완료**

9. 할인 금액 시각화 개선 (할인 유형 구분 및 체감가 표시)

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용:
  - 할인 유형을 즉시 할인, 적립, 캐시백으로 명확히 구분하여 표시
  - 체감가(최종 체감 지불 금액)를 별도로 표시하고 툴팁으로 설명 제공
  - 최적의 할인 방법은 아이콘과 강조 표시로 시각적 구분 제공
- **상태: 구현 완료**

10. 통신사 멤버십 + 네이버페이 주말 캐시백 조합 지원

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용: 통신사 멤버십 할인 적용 후 남은 금액으로 네이버페이 결제 시 주말 캐시백 적용 계산
- **상태: 구현 완료**

11. 모바일 최적화 UI

- 개발 난이도: 보통
- 우선순위: 상
- 세부내용:
  - 모바일 환경에서 탭 형태의 직관적인 UI 제공 (최적 할인, 전체 목록, 용어 설명)
  - 가장 중요한 정보(최적 할인)를 기본 탭으로 표시
  - 전체 목록 탭에서는 카드 형태로 결제 방법 표시, 카드 터치 시 상세 정보 확장/축소 기능
  - 용어 설명 탭에서 할인 관련 용어 설명 제공
  - 반응형 디자인으로 화면 크기에 따라 최적화된 UI 표시 (모바일: 탭+카드 형태, 데스크톱: 요약 정보+테이블 형태)
- **상태: 구현 완료**

12. 금액 입력 UX 개선

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용:
  - 금액 입력 필드에 +1,000원, +100원 버튼 추가
  - 초기화 버튼으로 금액을 0원으로 리셋
  - 기본 금액 제시, 입력 필드 포커스 시 자동 비우기
  - 계산식 입력 지원 등 사용자 편의성 증대
- **상태: 구현 완료**

13. 금액 계산기 기능

- 개발 난이도: 쉬움
- 우선순위: 중
- 세부내용: 편의점에서 여러 상품 구매 시 합계 계산을 위한 간편 계산기 기능 제공
- 상품명과 금액을 입력하여 항목별 관리 가능, 계산식 직접 입력 지원
- **상태: 구현 완료**

14. 매장별 할인 정책 동적 적용

- 개발 난이도: 보통
- 우선순위: 상
- 세부내용:
  - 각 매장(GS25, CU 등)의 고유한 할인 정책을 동적으로 적용하는 시스템
  - 매장별 통신사 멤버십, 네이버 멤버십 할인율 및 제한사항 반영
  - 시간대별, 상품 카테고리별 특수 할인 조건 처리 (예: CU의 KT 멤버십 오전 5~9시 간편식 할인)
- **상태: 구현 완료**
  - **GS25의 POP 로고에 따른 할인율 적용 구현 완료**
  - **CU의 KT 멤버십 시간 제한(오전 5~9시) 및 상품 제한(간편식) 구현 완료**
  - **간편식 상품 선택 체크박스 및 안내 메시지 UI 구현 완료**
  - **사용자가 매장별 특수 제한 사항을 쉽게 파악할 수 있는 UI 가이드 추가**

15. 카카오페이, 토스페이 할인 지원

- 개발 난이도: 보통
- 우선순위: 중
- 세부내용: 다양한 간편결제 수단(카카오페이, 토스페이)의 할인 계산 지원
- **상태: 카카오페이 굿딜 구현 완료, 토스페이 구현 예정**

16. 실시간 할인 정보 업데이트 시스템

- 개발 난이도: 어려움
- 우선순위: 중
- 세부내용: Next.js 기반 웹 관리자 페이지를 통한 실시간 정보 업데이트
- **상태: 구현 예정**

17. Flutter 앱 연동

- 개발 난이도: 어려움
- 우선순위: 하
- 세부내용: 웹 서비스의 API를 통한 모바일 앱 연동
- **상태: 구현 예정**

18. Google AdSense 통합

- 개발 난이도: 중간
- 우선순위: 중
- 세부내용:
  - 페이지 내 광고 표시를 위한 Google AdSense 통합
  - 사용자 경험을 고려한 인라인 배너 형식 광고 배치
  - 광고 로드 실패 시 최소 공간 차지하도록 처리
  - 반응형 광고 지원으로 다양한 화면에 최적화
  - AdSense 심사 중 일관된 UI 유지 기능
- **상태: 구현 완료**

19. 할인 정보 표시 컴포넌트 개선

- 개발 난이도: 중간
- 우선순위: 중
- 세부내용:
  - 할인 정보 표시를 위한 재사용 가능한 컴포넌트 분리 및 개발 (`DiscountDetail.tsx`)
  - 영수증 형태의 직관적인 할인 정보 표시 UI (`DiscountReceipt` 컴포넌트)
  - 카드 형태의 상세 할인 정보 표시 UI (`DiscountCardDetail` 컴포넌트)
  - 할인 유형별(즉시할인, 적립, 캐시백) 시각적 구분 컴포넌트 (`DiscountComponent`)
  - 할인 정보 표시를 위한 유틸리티 함수 모음 (`discountPresenter.ts`)
  - 복잡한 할인 계산 로직과 UI 표시 로직의 분리로 유지보수성 향상
  - 할인 유형에 따른 일관된 색상 체계 적용 (즉시할인: 녹색, 적립: 파란색, 캐시백: 노란색)
- **상태: 구현 완료**

### 기술 스택

- 프론트엔드: Next.js 14, TypeScript, TailwindCSS, ShadCN UI
- 상태 관리: React Hooks
- 할인 계산 로직: TypeScript 기반 계산 유틸리티
- 모바일 앱(향후): Flutter
- SEO 최적화:
  - OpenGraph 메타데이터 (og:title, og:description, og:image 등)
  - Twitter 카드 메타데이터
  - 파비콘 및 앱 아이콘 (16x16, 32x32, 192x192, 512x512)
  - 검색엔진 최적화 설정 (robots.txt, canonical URL 등)
  - 모바일 최적화 뷰포트 설정
  - 다국어 지원 (한국어)
  - 환경변수 기반 동적 URL 처리:
    - 개발/프로덕션 환경별 메타데이터 URL 자동 설정
    - OpenGraph 이미지 경로 동적 처리
    - canonical URL 환경별 최적화
  - 자동 사이트맵 생성 (sitemap.xml)
    - 정적 페이지(홈, 할인 팁, 문의)와 동적 페이지(매장별) 자동 포함
    - 페이지 중요도 및 업데이트 주기 설정
  - 구글 서치콘솔 등록 및 최적화
  - 공식 도메인 적용: halindoumi.com

### 개발 우선순위

1. 웹 서비스 기본 기능 구현 (매장 분류, 할인 정보 제공) - **완료**
2. 최적 할인 수단 계산 및 추천 시스템 - **완료**
3. 할인카드 할인률 직접 입력 기능 - **완료**
4. POP 로고 유무에 따른 할인 계산 - **완료**
5. 네이버페이 주말 캐시백 이벤트 - **완료**
6. 할인 금액 시각화 개선 (할인 유형 구분 및 체감가 표시) - **완료**
7. 통신사 멤버십 + 네이버페이 주말 캐시백 조합 - **완료**
8. 금액 계산기 기능 - **완료**
9. 모바일 최적화 UI - **완료**
10. 금액 입력 UX 개선 - **완료**
11. 매장별 할인 정책 동적 적용 (GS25, CU 등) - **완료**
12. SEO 최적화 (sitemap.xml, robots.txt, 메타데이터) - **완료**
13. 공식 도메인 적용 및 구글 서치콘솔 등록 - **완료**
14. 카카오페이, 토스페이 할인 지원 - **카카오페이 굿딜 구현 완료, 토스페이 진행 예정**
15. 즐겨찾기 기능 - **진행 예정**
16. 실시간 정보 업데이트 시스템 - **진행 예정**
17. 모바일 앱 개발 및 연동 - **진행 예정**
18. Google AdSense 통합 - **완료**
19. 할인 정보 표시 컴포넌트 개선 - **완료**

## 5. 사용자 인터페이스

### 매장 할인 정보 화면

1. 할인 수단 선택 영역

   - 매장 이름 및 정보
   - 탭으로 구분된 멤버십/결제방법 선택 영역
   - 멤버십 탭: 통신사 멤버십(T, KT, U+), 네이버 멤버십 선택
   - 결제방법 탭: 네이버페이(카카오페이, 토스페이 - 구현 예정), 할인카드(할인률 직접 입력)
   - 금액 및 POP 로고 유무 입력

2. 최적 할인 정보 표시 영역
   - 현재 입력 금액에 대한 최적 할인 수단 목록
   - 간편 계산기 기능 (여러 상품 가격과 이름을 쉽게 관리할 수 있는 계산기 제공)
   - 할인 유형별 정보 표시:
     - 즉시 할인: 현장에서 즉시 할인되는 금액
     - 적립: 구매 후 적립되는 포인트 금액
     - 캐시백: 결제 후 돌려받는 금액
   - 체감가 정보: 원래 금액에서 즉시 할인을 차감하고 적립과 캐시백을 고려한 최종 체감 지불 금액
   - 할인 금액 용어 설명 (모바일에서는 별도 탭으로 제공, 데스크톱에서는 툴팁으로 제공)
   - 금/토/일에는 네이버페이 선택 시 해당 요일 표시와 함께 캐시백 이벤트 알림 및 이벤트 신청 링크 제공
   - 통신사 멤버십 + 네이버페이 주말 캐시백 조합에 대한 혜택 정보 제공
   - 최적 할인 방법은 시각적으로 강조 표시 (아이콘, 색상, 테두리 등)
   - 화면 크기에 따른 최적화된 UI:
     - 모바일:
       - 탭 인터페이스로 정보 구분 (최적 할인, 전체 목록, 용어 설명)
       - 최적 할인 탭을 기본으로 표시하여 중요 정보 우선 제공
       - 카드 형태로 결제 방법 표시 (전체 목록 탭)
       - 카드 터치 시 상세 정보 펼침/접기 가능
     - 데스크톱:
       - 최적 할인 방법 요약 정보와 테이블 형태를 함께 표시
       - 테이블 형태로 모든 정보를 한눈에 제공
   - 결제 방법 변경 시 모든 카드가 자동으로 접히는 기능 (사용자가 변경된 정보를 명확히 인식할 수 있도록)
   - 앱 초기 로드 시 모든 카드는 접힌 상태로 표시 (사용자가 필요한 정보만 확장하여 볼 수 있도록)

### 구현된 기능 목록

1. **금액 입력 및 계산**

   - [x] 기본 금액(5000원) 제시
   - [x] 입력 필드 포커스 시 자동 비우기
   - [x] 계산식 직접 입력 지원 (1200+800 등의 수식 계산)
   - [x] +1,000원, +100원 버튼으로 빠른 금액 추가
   - [x] 초기화 버튼으로 금액 리셋
   - [x] POP 로고 유무 선택

2. **할인 수단 선택 및 계산**

   - [x] 멤버십 유형 선택 (통신사 멤버십, 네이버 멤버십)
   - [x] 결제 방법 선택 (네이버페이, 할인카드)
   - [x] 할인카드 할인률 직접 입력
   - [x] 멤버십 최소 결제 금액(1,000원) 조건 반영
   - [x] 통신사 멤버십 + 네이버페이 주말 캐시백 조합 지원

3. **할인 결과 표시 개선**

   - [x] 할인 유형(즉시할인, 적립, 캐시백) 구분하여 표시
   - [x] 체감가(최종 체감 지불 금액) 별도 표시
   - [x] 할인 유형별 배지(즉시할인, 포인트적립, 캐시백, 카드할인) 표시
   - [x] 최적 할인 방법 시각적 강조 (아이콘, 색상, 테두리)
   - [x] 네이버페이 주말 캐시백 이벤트 안내 및 신청 링크

4. **모바일 최적화 UI**

   - [x] 탭 기반 UI (최적 할인, 전체 목록, 용어 설명)
   - [x] 카드 형태의 직관적인 정보 표시
   - [x] 카드 헤더 터치 시 상세 정보 펼침/접기
   - [x] 결제 수단 변경 시 모든 카드 자동 접힘
   - [x] 앱 초기 로드 시 모든 카드는 접힌 상태로 표시

5. **반응형 디자인**

   - [x] 모바일: 탭+카드 형태의 직관적인 UI
   - [x] 데스크톱: 요약 정보+테이블 형태의 상세 정보

6. **매장 지원**
   - [x] GS25
   - [x] CU
   - [x] 세븐일레븐
   - [x] 이마트24

## 10. 구현 완료된 기능

- 기본 할인 계산 기능
- 통신사 멤버십 할인 지원 (SKT, KT, LG U+)
- 네이버 멤버십 할인 지원
- 간편결제 할인 지원 (네이버페이, 카카오페이, 토스페이)
- 카카오페이 굿딜 3% 할인 옵션 지원
- 복수 할인 방법 동시 표시 기능 (T멤버십 + 카카오페이 굿딜 등)
- 반응형 디자인 (모바일, 데스크톱)
- 금액 입력 및 계산식 지원
- 영수증 스타일의 할인 결과 UI

## 11. 진행중인 기능

- 매장별 할인 정책 정보
- 할인 이벤트 정보 업데이트
- SEO 최적화
- 다크 모드 지원

## 12. 진행 상태표

| 기능                      | 난이도 | 우선순위 | 상태   |
| ------------------------- | ------ | -------- | ------ |
| 기본 할인 계산 기능       | 중     | 상       | 완료   |
| 통신사 멤버십 할인 지원   | 중     | 상       | 완료   |
| 네이버 멤버십 할인 지원   | 중     | 상       | 완료   |
| 간편결제 할인 지원        | 중     | 상       | 완료   |
| 카카오페이 굿딜 할인 지원 | 중     | 중       | 완료   |
| 복수 할인 방법 동시 표시  | 중     | 중       | 완료   |
| 반응형 디자인             | 중     | 상       | 완료   |
| 금액 입력 및 계산식 지원  | 하     | 중       | 완료   |
| 영수증 스타일 UI          | 중     | 중       | 완료   |
| 매장별 할인 정책 정보     | 상     | 중       | 진행중 |
| 할인 이벤트 정보          | 중     | 중       | 진행중 |
| SEO 최적화                | 중     | 중       | 진행중 |
| 다크 모드 지원            | 하     | 하       | 계획   |
| 사용자 계정 기능          | 상     | 하       | 계획   |
| 모바일 앱 출시            | 상     | 하       | 계획   |

## 13. 기술적 고려사항

### 13.1 성능 최적화

- 클라이언트 사이드 계산으로 빠른 응답 시간 확보
- 이미지 최적화
- 코드 스플리팅

### 13.2 SEO 최적화

- 메타 태그 최적화
- 구조화된 데이터 마크업
- 사이트맵 생성
- 로봇 텍스트 파일 최적화

### 13.3 접근성

- WCAG 2.1 지침 준수
- 키보드 네비게이션 지원
- 스크린 리더 호환성
- 충분한 색상 대비

## 14. 소비자 정보 및 UI 요구사항

매장 할인 정보는 사용자가 쉽게 이해할 수 있는 방식으로 표시되어야 합니다:

### 14.1 할인 정보 표시

- 할인 방법 선택 (멤버십, 결제 수단)
- 최적 할인 정보 표시
  - 할인 유형별 금액:
    - 즉시 할인 금액: 멤버십 할인, 카드 할인 등 현장에서 즉시 할인되는 금액
    - 적립 금액: 포인트 적립 등 구매 후 적립되는 금액
    - 캐시백 금액: 결제 수단에 따른 후불 캐시백 금액
  - 체감가: 실제 소비자가 체감하는 최종 지불 금액
  - 총 할인율: 모든 할인과 혜택을 고려한 최종 할인율
- 할인 요약 및 상세 정보 토글 가능
- 복수 할인 결합 시 모든 할인 방법을 영수증에 표시
